{% extends "base.html.twig" %}
{% block header %}
    <div class="game-header">
        <h3>Player {{ playerIndex }} --- Welcome to Labyrinth Game!</h3>
    </div>
{% endblock %}

{% block content %}
    {% set treasures = ['💌','💣','🛍','📿','🔭','💎','💰','📜','🗿','🏺','🔫',
        '🛡','💈','🛎','⌛','🌡','⛱','🎈','🎎','🎁','🔮','📷','🕯', '?'] %}

    {% include 'invite.html.twig' with {
        'idGame': game.getId(),
        'playerIndex': playerIndex,
        'gamePlayerIndex': game.getCurrentPlayerIndex(),
        'playerScore': game.getCurrentPlayerScore(),
        'targetCardNumber' : game.getCurrentPlayerTargetCard(),
        'treasures': treasures,
        'state': game.getState()
    }
        only %}

    {% include 'grid.html.twig' with {
        'board' : game.board,
        'treasures': treasures
    }
        only %}

    {% include 'players.html.twig' with {
        'players' : game.players
    }
        only %}

    {% if game.isStateToInsert() %}
        {% include 'insertLayer.html.twig' with {
            'idGame': game.getId(),
            'playerIndex': playerIndex,
            'gamePlayerIndex': game.getCurrentPlayerIndex(),
            'isToInsertMode': game.isStateToInsert(),
            'remainingPathCard' : game.remainingPathCard
        }
            only %}
    {% elseif game.isStateToMove() %}
        {% include 'movePlayerLayer.html.twig' with {
            'idGame': game.getId(),
            'playerIndex': playerIndex,
            'gamePlayerIndex': game.getCurrentPlayerIndex(),
            'isToMoveMode': game.isStateToMove(),
            'currentPlayerReachablePositions' : game.getCurrentPlayerReachablePositions()
        }
            only %}
    {% endif %}

    {% include 'remainingPathCard.html.twig' with {
        'idGame': game.getId(),
        'playerIndex': playerIndex,
        'gamePlayerIndex': game.getCurrentPlayerIndex(),
        'isToInsertMode': game.isStateToInsert(),
        'remainingPathCard' : game.remainingPathCard,
        'treasures': treasures
    }
        only %}
{% endblock %}
